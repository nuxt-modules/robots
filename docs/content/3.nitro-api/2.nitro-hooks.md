---
title: Nitro Hooks
description: Learn how to use Nitro hooks to modify the robots final output.
---

## `'robots:init'`{lang="ts"}

**Type:** `(ctx: HookContext) => void | Promise<void>`{lang="ts"}

```ts
interface HookContext {
  groups: RobotsGroupResolved[]
  sitemaps: string[]
  errors: string[]
}
```

Modify the robots config during Nitro initialization. This is called once when Nitro starts.

Use this hook when you need to fetch or compute robot rules at startup and cache them for all subsequent requests.

```ts [server/plugins/robots-init.ts]
export default defineNitroPlugin((nitroApp) => {
  nitroApp.hooks.hook('robots:init', async (ctx) => {
    // Fetch ignored routes at startup and cache them
    const ignoredRoutes = await $fetch('/api/ignored-routes')
    ctx.groups[0].disallow.push(...ignoredRoutes)
  })
})
```

## `'robots:robots-txt:input'`{lang="ts"}

**Type:** `(ctx: HookContext) => void | Promise<void>`{lang="ts"}

```ts
interface HookContext {
  groups: RobotsGroupResolved[]
  sitemaps: string[]
  errors: string[]
  event: H3Event
}
```

Modify the robots config before generating the robots.txt file. This is called on each robots.txt request.

Use this hook when you need to customize the robots.txt output based on the request context (e.g., headers).

```ts [server/plugins/robots-dynamic.ts]
export default defineNitroPlugin((nitroApp) => {
  nitroApp.hooks.hook('robots:robots-txt:input', async (ctx) => {
    // Dynamically adjust rules based on request
    const isDevelopment = ctx.event.headers.get('x-development') === 'true'
    if (isDevelopment) {
      ctx.groups[0].disallow.push('/staging/*')
    }
  })
})
```

## `'robots:config'`{lang="ts"} <Badge type="warning">Deprecated</Badge>

**Type:** `(ctx: HookContext) => void | Promise<void>`{lang="ts"}

::callout{type="warning"}
This hook is deprecated. Use `robots:init` for initialization or `robots:robots-txt:input` for robots.txt generation instead.
::

```ts
interface HookContext {
  groups: RobotsGroupResolved[]
  sitemaps: string[]
  context: 'robots.txt' | 'init'
  event?: H3Event // undefined on `init`
}
```

This hook was used for both initialization and robots.txt generation. It has been split into two separate hooks for better clarity:
- Use `robots:init` when `context === 'init'`
- Use `robots:robots-txt:input` when `context === 'robots.txt'`

## `'robots:robots-txt'`{lang="ts"}

**Type:** `(ctx: HookContext) => void | Promise<void>`{lang="ts"}

```ts
export interface HookRobotsTxtContext {
  robotsTxt: string
  e: H3Event
}
```

This hook allows you to modify the robots.txt content before it is sent to the client.

```ts [server/plugins/robots-remove-comments.ts]
export default defineNitroPlugin((nitroApp) => {
  if (!process.dev) {
    nitroApp.hooks.hook('robots:robots-txt', async (ctx) => {
      // remove comments from robotsTxt in production
      ctx.robotsTxt = ctx.robotsTxt.replace(/^#.*$/gm, '').trim()
    })
  }
})
```
